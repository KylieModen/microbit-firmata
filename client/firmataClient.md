## BBC micro:bit Firmata Client

The Firmata Client is a Javascript class that runs in Node.js and communicates
with the micro:bit Firmata firmware over a USB-serial connection. It implements the
Firmata protocol and provides properties and methods for interacting with the micro:bit.

### Connecting

The Firmata Client communicates with the micro:bit via a serial port. The easiest way
to open a connection is to call the connect() method, which looks for a serial port connected
to a micro:bit and opens it.

<dl>
	<dt>connect()</dt>
		<dd>Connect to the board.
		Scan all serial ports to find one with a micro:bit connected and opens that, if found.</dd>

	<dt>setSerialPort(port)</dt>
		<dd>Alternative to connect() that allows the client to supply an open serial port.
		Used by clients that  do their own serial port management.</dd>

	<dt>disconnect()</dt>
		<dd>Close and discard the serial port. Seldom needed.</dd>
</dl>

### Version Information

Several Firmata Client properties provide version information.

<dl>
	<dt>boardVersion</dt>
		<dd>The micro:bit hardware version (currently either 1.3 or 1.5).</dd>

	<dt>firmataVersion</dt>
		<dd>Version of Firmata protocol used. Unlikely to change.</dd>

	<dt>firmwareVersion</dt>
		<dd>Firmata firmware version. Includes DAL, mbed library, and soft device versions.</dd>
</dl>

### Display

The micro:bit display is a 5x5 LED matrix that can be used to display icons or to
output text or numbers by scrolling them across the display. The brightness of each
LED can be controllered, if desired. Indidividual LED's can be turned on and off using
the displayPlot() method.

<dl>
	<dt>scrollText(string, delay)</dt>
		<dd>Scroll the given text across the display. The optional delay parameter
		controls the scroll speed, with smaller numbers resulting in faster speeds.
		The default value is 120.</dd>

	<dt>scrollInteger(number, delay)</dt>
		<dd>Scroll the given integer across the display. The optional delay parameter
		controls the scroll speed, with smaller numbers resulting in faster speeds.
		The default value is 120.</dd>

	<dt>isScrolling</dt>
		<dd>Property. True while text is actively scrolling across the display.</dd>
</dl>

### Buttons

Two properties reflect the state of buttons A and B. The micro:bit buttons also generate
events (see the **Events** section).

<dl>
	<dt>buttonAPressed<br>
		buttonBPressed</dt>
			<dd>Boolean values that reflect the current button state.
			True when the given button is pressed.</dd>
</dl>

### Events

Events are generated by the micro:bit buttons, accelerometer, and -- if configured to generate
touch events -- I/O pins 0-2.

<dl>
	<dt>addFirmataEventListener(eventListenerFunction)</dt>
		<dd>Add a listener function to handle micro:bit DAL events.
		the function arguments are the sourceID and eventID (both numbers).</dd>

	<dt>addFirmataUpdateListener(updateListenerFunction)</dt>
		<dd>Add a listener function (with no arguments) called when sensor
		or pin updates arrive.</dd>

	<dt>removeAllFirmataListeners()</dt>
		<dd>Remove all event and update listeners. Used by test suite.</dd>
</dl>

### Analog Pins and Sensors

tbd

### Digital Pins

tbd
